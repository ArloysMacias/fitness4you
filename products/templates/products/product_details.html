{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.css" rel="stylesheet">
    <link href="{% static 'products/css/products.css' %}" rel="stylesheet">
    <link href="{% static 'products/css/queries.css' %}" rel="stylesheet">
{% endblock %}
{% block extra_js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>
    {% comment %}<script src="{% static 'products/js/nouislider/nouislider.js' %}"></script>{% endcomment %}
    <script src="{% static 'products/js/wnumb/wNumb.min.js' %}"></script>
{% endblock %}

<!--Header-->
{% block page_header %}
    <div class="container black-text header-container">
        <div class="row">
            <div class="col s12 m12 l12 center">
                <h3>Product Details</h3>
            </div>
        </div>
    </div>
{% endblock %}
{% block content %}
    <div class="overlay "></div>

    <!--GO back button-->
    <div class="row">
        <div class="col s12">
            <a class="waves-effect waves-teal btn-flat" href="{% url 'products' %}"><i
                    class="material-icons left">arrow_back</i>Go Back</a>
        </div>
    </div>

    <!--Detail container-->
    <div class="container">
    <div class="row">
        <div class="col s12 m6 l6">
            <!--Image-->
            {% if product.image_url %}
                <img class="materialboxed product-detail-image" height="380" src="{{ product.image_url }}"
                     alt="product-image">
            {% else %}
                <img class="materialboxed product-detail-image" height="380"
                     src="{{ MEDIA_URL }}images/products_images/no-image.png"
                     alt="no-images">
            {% endif %}
        </div>
            <!--Product Detail-->
        <div class="col s12 m6 l6 black-text product-detail">
            <h4>{{ product.product_name }}</h4>
            <h5>â‚¬ {{ product.price }}</h5>
            <!--Rating-->
            {% if product.overall_rating %}
                <p id="rating" class="text-lighten-5"></p><!--The rate is filled by jquery-->
            {% else %}
                <small class="text-lighten-1">No Rating</small>
            {% endif %}
            <!--Name-->
            <p>{{ product.brand_name }}</p>
            <!--Description-->
            <p>{{ product.product_description }}</p>
            <!--Quantity-->
            <div class="row center">
                <div class="input-field col s12">
                    <select id="amount_to_buy">
                        <option value="" disabled>Choose your option</option>
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                    <label>Select the amount</label>
                </div>
            </div>

            <div class="row center">
                <div class="col s12 right">
                    <a href="{% url 'shopping_bag' %}" class="waves-effect waves-light btn-large buy-button"><i class="material-icons right">local_grocery_store</i>Buy</a>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    <script src="{% static 'home/js/materialize.js' %}"></script>
    <script>
        $(document).ready(function () {
            let rat =
            {{ product.overall_rating }}
            if (rat) {
                var ratingHtml = '';
                for (var i = 0; i < 5; i++) {
                    if (rat < (i + 0.5)) {
                        ratingHtml += '&#10025;';//empty-star
                    } else if (rat < (i + 0.9)) {
                        ratingHtml += '&#10027;';//half-star
                    } else {
                        ratingHtml += '&#10029;';//full-star
                    }
                    document.getElementById('rating').style.display = '';
                    document.getElementById('rating').innerHTML = `Rating: ${rat} ${ratingHtml} `;
                }
            } else {
                document.getElementById('rating').style.display = 'none';
            }
        })
    </script>
{% endblock %}

