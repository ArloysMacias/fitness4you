{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.css" rel="stylesheet">
    <link href="{% static 'products/css/products.css' %}" rel="stylesheet">
    <link href="{% static 'products/css/queries.css' %}" rel="stylesheet">
{% endblock %}
{% block extra_js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>
    {% comment %}<script src="{% static 'products/js/nouislider/nouislider.js' %}"></script>{% endcomment %}
    <script src="{% static 'products/js/wnumb/wNumb.min.js' %}"></script>
{% endblock %}

<!--Header-->
{% block page_header %}
    <div class="container black-text header-container">
        <div class="row">
            <div class="col s12 left">
                <h3>Products Detail</h3>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="overlay "></div>
    <!-- Page Layout here -->
    <div class="black-text">
        <form method="GET" action="{% url 'products' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col offset-l3 l7">
                    <div class="container">
                        <div class="row">
                            {% if product.image_url %}
                                <img class="activator" src="{{ product.image_url }}" alt="product-image">
                            {% else %}
                                <img class="activator" src="{{ MEDIA_URL }}images/products_images/no-image.png"
                                     alt="no-images">
                            {% endif %}
                            <span class="black-text">{{ product.product_name }}</span>
                        </div>
                        <p>â‚¬{{ product.price }}</p>
                        {% if product.overall_rating %}
                            <small class=" text-lighten-5">{{ product.overall_rating }}</small>
                        {% else %}
                            <small class="text-lighten-1">No Rating</small>
                        {% endif %}
                        <p class="truncate">{{ product.brand_name }}</p>
                    </div>
                    <p>{{ product.product_description }}</p>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    <script src="{% static 'home/js/materialize.js' %}"></script>
    <script src="{% static 'products/js/nouislider.js' %}"></script>
    <script src="{% static 'products/js/nouislider/nouislider.js' %}"></script>
    <script>

        function filterByPrice() {
            var lower = document.getElementById('lower').value;
            var upper = document.getElementById('upper').value;
            window.location.href = "{% url 'products' %}" + "?price__gt=" + lower + "&price__lt=" + upper + "";
        }

        function Search() {
            var search_value = document.getElementById('search').value;
            window.location.href = "{% url 'products' %}" + "?search=" + search_value;
        }

        function filterRating(chose) {
            window.location.href = "{% url 'products' %}" + "?overall_rating=" + chose;
        }

        function sortBy() {
            var sort = document.getElementById('sort-selector').value;
            window.location.href = "{% url 'products' %}" + "?ordering=" + sort;
        }
    </script>
{% endblock %}

